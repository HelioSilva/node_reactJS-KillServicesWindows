<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <title>Testes</title>
</head>
<body>
    <div id="alert_placeholder"></div>
    
        <div class="alert alert-success alert-dismissible  fade show" id="myAlert">
                <a href="#" class="close">&times;</a>
                <strong>Success!</strong> This alert box could indicate a successful or positive action.
              </div>


    <div class="container" style="
        height: 80vh;
        display: flex;
        justify-content: space-around;
        align-items: center;
        
    ">
        <button onclick="fazerRequisicao(true)" type="button"  class="btn btn-info">Ativar Serviço (Computek Serviços)</button>
        <button onclick="fazerRequisicao(false)" type="button" class="btn btn-info">Parar Serviço (Computek Serviços)</button>
        
    </div>



    <script>

function showalert(message,alerttype) {

$('#alert_placeholder').append('<div id="alertdiv" class="alert ' +  alerttype + '"><a class="close" data-dismiss="alert">×</a><span>'+message+'</span></div>')

setTimeout(function() { // this will automatically close the alert and remove this if the users doesnt close it in 5 secs


  $("#alertdiv").remove();

}, 2000);
}

$(document).ready(function(){
  $(".close").click(function(){
    $("#myAlert").alert("close");
  });

  $(".abrir").click(function(){
    showalert("teste","alert-success");
  });
});



        function fazerRequisicao(tipo){

            var urlTrue = "http://heliosilva.online:7000/status/00657034000153/true";
            var urlFalse = "http://heliosilva.online:7000/status/00657034000153/false";

            var xhttp = new XMLHttpRequest();

            xhttp.open("GET", tipo==true ? urlTrue : urlFalse , false);

            xhttp.send();//A execução do script pára aqui até a requisição retornar do servidor

            let res = JSON.parse(xhttp.responseText);

            if(res != null && res.ok==1){
                showalert("Status alterado com sucesso!","alert-success");
            }else{
                showalert("Falha na comunicação!","alert-danger");
            }
        }
    </script>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>
</html>